<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <nav class="navbar navbar-default navbar-fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="ccontainer-fluid" id="navbar">
                <div class="navbar header">
                    <a class="navbar-brand" [routerLink]="['/list']">Admin</a>
                    <ul class="mav navbar-nav">
                        <li class="nav-item" id="l1">
                            <a class="nav-link" [routerLink]="['/add']">Add Student</a>
                        </li>
                        <li class="nav-item" id="l2">
                            <a class="nav-link" [routerLink]="['/edit']">Edit List</a>
                        </li>
                        <li class="nav-item" id="l3">
                            <a class="nav-link" [routerLink]="['/list']">Email Attendance</a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </div> <br>
    <div ng-controller="myController">
        <!-- <label for="search">Search</label>
        <input type="text" #myInput [(ngModel)]="firstname" (input)="search()" /> -->

        <!-- <input type="text" placeholder="Search students" /> -->
        <div class="table-responsive-sm" (click)="default()">
            <table class="table">
                <thead class="container text-center text-light bg-secondary">
                    <tr>
                        <th>Roll</th>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>Actions</th>
                    </tr>
                </thead> <br>
                <tbody class="text-center" id="tbody">
                    <tr *ngFor="let item of MyArray">
                        <th id="Rollno">{{ item.Rollno }}</th>
                        <td id="firstname">{{ item.First_name }}</td>
                        <td>{{ item.Last_name }}</td>
                        <td>
                            <button class="btn btn-primary fa fa-edit" data-target="#update" data-toggle="modal" (click)="openModal(update,item)">&nbsp;Update</button>&nbsp;
                            <button class="btn btn-danger fa fa-trash" (click)="delete(item.Rollno)">&nbsp;Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!-- modal popup -->
    <div class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <ng-template #update let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Update Form</h4>

                        <button class="btn fa fa-close" (click)="modal.dismiss()">
                            <!-- <span>&times;</span> -->
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class>
                            <form class="container-fluid" [formGroup]="registerForm" method="POST" enctype="multipart/form-data" action="auth2" (ngSubmit)="onSubmit()">

                                <div class="form-group">
                                    <label>Roll Number</label>
                                    <input type="number " formControlName="roll" class="form-control " name="roll" disabled/>
                                    <div *ngIf="submitted && f.firstName.errors " class="invalid-feedback ">
                                        <div *ngIf="f.roll.errors.required ">Roll Number is required</div>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <label>First Name</label>
                                    <input type="text " formControlName="firstName" class="form-control " name="first" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors } " />
                                    <div *ngIf="submitted && f.firstName.errors " class="invalid-feedback ">
                                        <div *ngIf="f.firstName.errors.required ">First Name is required</div>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <label>Last Name</label>
                                    <input type="text " formControlName="lastName" class="form-control " name="last" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors } " />
                                    <div *ngIf="submitted && f.lastName.errors " class="invalid-feedback ">
                                        <div *ngIf="f.lastName.errors.required ">Last Name is required</div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" (click)="onSubmit()">Submit</button>
                    </div>
                </ng-template>


            </div>
        </div>
    </div>
</body>

</html>